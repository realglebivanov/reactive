<!DOCTYPE html>
<html>

<head>
  <title>Grecha.js</title>
</head>

<body>
  <div id="entry"></div>
  <script src="./grecha.js"></script>
  <script>
    const count$ = observable(0);
    const hard$ = observable(false);
    const veryHard$ = observable(true);

    const onClick = function () {
      count$.updateValue((count) => count + 1);
      hard$.updateValue((hard) => !hard);
    };

    const r = router({
      "/": div(
        h1("Grecha.js"),
        div(a("Foo").att$("href", "#/foo")),
        div(a("Bar").att$("href", "#/bar")),
        div(
          h2(cond({
            if$: joinObservable((hard, veryHard) => hard & veryHard, hard$, veryHard$),
            then: "Rock hard, baby",
            otherwise: "Wood needed"
          })),
          span(template((count) => `Counter: ${count}`, count$))
        ),
        cond({
          if$: hard$,
          then: img("KashaHard.gif").onclick$(onClick),
          otherwise: img("Kasha.png").onclick$(onClick)
        })
      ),
      "/foo": div(
        h1("Foo"),
        p(LOREM),
        div(a("Home").att$("href", "#")),
      ),
      "/bar": div(
        h1("Bar"),
        p(LOREM),
        div(a("Home").att$("href", "#"))
      )
    });
    entry.appendChild(r);
  </script>
</body>

</html>